(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{170:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(9),s=(n(0),n(190)),i={id:"web-server",title:"Basics of web server",sidebar_label:"Basics of a web server"},o={id:"node/web-server",title:"Basics of web server",description:"## NodeJS as a web server",source:"@site/docs/node/web_server.md",permalink:"/docs-and-blog/docs/node/web-server",sidebar_label:"Basics of a web server",sidebar:"someSidebar",previous:{title:"Intro to Node docs",permalink:"/docs-and-blog/docs/node/intro"},next:{title:"Require and modules",permalink:"/docs-and-blog/docs/node/require"}},l=[{value:"NodeJS as a web server",id:"nodejs-as-a-web-server",children:[]},{value:"Express",id:"express",children:[{value:"Routing",id:"routing",children:[]},{value:"Middleware",id:"middleware",children:[]},{value:"Template engines",id:"template-engines",children:[]}]},{value:"REST",id:"rest",children:[]}],c={rightToc:l};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("h2",{id:"nodejs-as-a-web-server"},"NodeJS as a web server"),Object(s.b)("p",null,"Information sent from the server is defined by protocols like HTTP, FTP, SMTP... and the act of separating that information into Packets and sending it through a socket is the TCP/IP protocol."),Object(s.b)("p",null,"HTTP Parser is a c program embedded in node. It is wrapped in the js side of the code and several features are added to it. Node can build the HTTP format for requests and responses using the http-parser (among other modules)."),Object(s.b)("p",null,"Using the http native module node allow us to build web servers. The http.createServer has a function parameter called when a request happens with the request and the response. Request and Response also inherit from EventEmitter."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"const http = require('http')\nconst server = http.createServer(function(req, res) {})\nserver.listen(3000)\n")),Object(s.b)("p",null,"Responses in node can be used as a writeable stream and data can be piped to them (e.g. reading an html file and writing it to the response as a stream)"),Object(s.b)("h2",{id:"express"},"Express"),Object(s.b)("p",null,"Minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications."),Object(s.b)("p",null,"Calling express returns a function with properties and methods added to it, it gets wraps of the response and requests as paramenters. The express app provides a listen function that wraps the http ",Object(s.b)("inlineCode",{parentName:"p"},"server.listen"),"."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"const expres = require('express')\nconst app = express()\napp.listen(3000)\n")),Object(s.b)("h3",{id:"routing"},"Routing"),Object(s.b)("p",null,"Express Routing allows patterns and regular expressions in the urls."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"app.get('/ab?cd', function (req, res) {\n  res.send('ab?cd')\n})\napp.get(/.*fly$/, function (req, res) {\n  res.send('/.*fly$/')\n})\n")),Object(s.b)("p",null,"Url parameters are passed to ",Object(s.b)("inlineCode",{parentName:"p"},"request.params"),' the name is defined in the route with ":" as ',Object(s.b)("inlineCode",{parentName:"p"},"/user/:id"),"\nQuery strings are available at ",Object(s.b)("inlineCode",{parentName:"p"},"request.query"),".\nFor accessing bodies, use body-parser and it will be availabe at ",Object(s.b)("inlineCode",{parentName:"p"},"request.body"),"."),Object(s.b)("h3",{id:"middleware"},"Middleware"),Object(s.b)("p",null,"Middlewares work through ",Object(s.b)("inlineCode",{parentName:"p"},"app.use")," it takes an url and a function with request, response and next or just the function."),Object(s.b)("p",null,"express.static streams static files automatically. All files under public directory will be returned when requested throught the assets endpoint."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"app.use('/assets', express.static(_dirname + '/public'))\n")),Object(s.b)("p",null,Object(s.b)("a",Object(r.a)({parentName:"p"},{href:"https://expressjs.com/en/resources/middleware.html"}),"https://expressjs.com/en/resources/middleware.html")),Object(s.b)("h3",{id:"template-engines"},"Template engines"),Object(s.b)("p",null,"Many different engines can be used with express (that's why it's unopinionated). The selected engine is setted in the app.js. Express looks for templates in /views by default."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"app.set('view engine', 'ejs')\n")),Object(s.b)("p",null,"Rendering templates can be done by calling ",Object(s.b)("inlineCode",{parentName:"p"},"response.render")," express will handle it and apply the rendering depending on the selected engine."),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"res.render('index', {name: user.name})\n")),Object(s.b)("h2",{id:"rest"},"REST"),Object(s.b)("p",null,"Representational State Transfer (REST) software architecture style for web services. Independent of the payload format. When we use REST style an Application can interact with resource by knowing only two things :"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Identifier of the resource"),Object(s.b)("li",{parentName:"ul"},"Action to be performed on the resource")),Object(s.b)("p",null,"GET person/id\nPOST person"))}p.isMDXComponent=!0},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),p=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},d=function(e){var t=p(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=r,m=d["".concat(i,".").concat(u)]||d[u]||b[u]||s;return n?a.a.createElement(m,o({ref:t},c,{components:n})):a.a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);