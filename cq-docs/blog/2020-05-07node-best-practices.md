---
id: node-best-practices
title: Best practices in Node JS
author: David Ortiz
# author_title: Docusaurus Core Team
author_url: https://github.com/DavidOVM
author_image_url: https://avatars2.githubusercontent.com/u/15112119?s=460&u=87d77526d3584da629e60e6cf8c5f65b0f9749c7&v=4
tags: [node]
---

Recommendations and best practices for developing in Node (and general sw development too) - On going list.

<!--truncate-->

## Best practices

- Componetize the code base, create npm packages for common utilities (private repo). Keep a lib directory within your codebase with utils.
- Layer up the app (middlewares are embraced), leave Express just for the api layer.
- Protect env vars, throw errors if not present. Keep secrets out of the repo. process.env should only be accessed through a centralized config file.
- Use async await (forget callbacks). Don't leave unhandled promises.
- Keep errors as native Errors, don't go with customs ones.
- Document your api, models and errors. (Graphql) or autogenerated
- Dont use console logs, use a dedicated logger library. Monitor errors.
- Always validate inputs (Joi).
- ESLint, pretify, naming conventions. Use lowerCamelCase when naming constants, variables and functions and UpperCamelCase
- All requires at the top of the files.
- Dont reinvent the wheel, use npm
- Decouple api from frontend.
- Use semantic versioning for your modules: Major.Minor.Patch 1.9.12 <https://semver.org>

<https://medium.com/swlh/common-mistakes-that-node-js-developers-make-9df7106d09f1>

<https://github.com/goldbergyoni/nodebestpractices>

## Testing

- Unit testing, coverage
- Integration / acceptance. This one is the most important, keeps consistency and reliablity.
- Penetration, performance, dependencies,

More about testing: [Testing](testing)

## Security

- Implement rate limiting using an external service
- Follow standards for session management (keep it in a middleware) oauth etc. Provide easy revocabilty.
- Use bcrypt for passwords (salt)
- Validate JSONs
- Provide visibility of all entrypoints to the service (login, auth...) limit calls agains brute force.
- Take care of errors not giving up PI (this email is not in our system). Dont return whole errors to the client.
- Careful with regex validation. Evil regex could take seconds to validate and block the event loop.
- Hide your tech stack <https://en.wikipedia.org/wiki/Denial-of-service_attack>
- Take care of secrets and .env files.
- Prevent introducing user input into `eval()`, `setTimeout()` and `setInterval()` functions. This could cause the execution of said input.
  <https://medium.com/@nodepractices/were-under-attack-23-node-js-security-best-practices-e33c146cb87d>
  <https://www.npmjs.com/package/helmet>

More about [cryptography](../docs/node/cryptography/crypto)

Express recommendations and useful packages: <https://expressjs.com/en/advanced/best-practice-security.html>
