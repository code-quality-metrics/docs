(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{183:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(1),r=n(9),c=(n(0),n(190)),i={id:"data-in-transit",title:"Data in transit",sidebar_label:"Data in transit"},o={id:"node/cryptography/data-in-transit",title:"Data in transit",description:"Data on the wire.",source:"@site/docs/node/cryptography/data-in-transit.md",permalink:"/docs-and-blog/docs/node/cryptography/data-in-transit",sidebar_label:"Data in transit",sidebar:"someSidebar",previous:{title:"Data at rest",permalink:"/docs-and-blog/docs/node/cryptography/data-at-rest"},next:{title:"MFA",permalink:"/docs-and-blog/docs/node/cryptography/mfa"}},l=[{value:"Implementation",id:"implementation",children:[]},{value:"HTTPS",id:"https",children:[]}],s={rightToc:l};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Data on the wire."),Object(c.b)("p",null,"Threats:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Lose confidentiality. Attacker accessing the data (read or change) while the data is in transit. Man-in-the-middle attack."),Object(c.b)("li",{parentName:"ul"},"Impersonation. Verify the identity of the other end of the communication.")),Object(c.b)("p",null,"Asymmetric encription -> encrypt with one key, decrypt with another key (public/private key pair) For solving impersonation."),Object(c.b)("p",null,"HMAC -> hash based message authentication code. Hashes the data and sends it, then the receiver hashes anc compares. For knowing if data was changed."),Object(c.b)("p",null,"Digital signatures -> hashing + asymmetric encryption. Big part of the PKI (backbone of https)"),Object(c.b)("h3",{id:"implementation"},"Implementation"),Object(c.b)("p",null,"Diffie Hellman key exchange. How to generate a shared secret over a public channel."),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"crypto.createDiffieHellman")," creates a diffiehellman object and takes the number of bits of the key as param. (asymetric keys should be larger than symmetric). On the diffihellman object we can call ",Object(c.b)("inlineCode",{parentName:"p"},"generateKeys()")," to get the keys. For generating bob we use the prime number and the generator from alice. When we have both keys we can generate the shared secret."),Object(c.b)("p",null,"The shared values over the channel are the prime and the generator numbers and the computed public key."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const crypto = require('crypto')\n\nconst alice = crypto.createDiffieHellman(2048)\nconst aliceKey = alice.generateKeys()\n\nconst bob = crypto.createDiffieHellman(alice.getPrime(), alice.getGenerator())\nconst bobKey = bob.generateKeys()\n\n// Generate the shared secret both will be equal\nconst aliceSecret = alice.computeSecret(bobKey)\nconst bobSecret = bob.computeSecret(aliceKey)\n")),Object(c.b)("p",null,"also useful: ",Object(c.b)("inlineCode",{parentName:"p"},"crypto.generateKeyPair()")),Object(c.b)("p",null,"HMAC. ",Object(c.b)("inlineCode",{parentName:"p"},"crypto.createHmac()")," with the algoritm and a secret (shared between both parties) then update it with data and calculate the signedhash with ",Object(c.b)("inlineCode",{parentName:"p"},"digest()"),". Now we can send the data along with the signedhash. Then Bob can calculate a signed hash with the same secret and compare."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const crypto = require('crypto')\nconst hmac = crypto.createHmac('sha256', 'secret')\nhmac.update('some data to be hashed')\nconst signedHash = hmac.digest('hex')\n")),Object(c.b)("h3",{id:"https"},"HTTPS"),Object(c.b)("p",null,"Asymmetric encryption for exchanging keys and symmetric encryption for messages."))}p.isMDXComponent=!0},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),p=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},b=function(e){var t=p(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=p(n),h=a,u=b["".concat(i,".").concat(h)]||b[h]||d[h]||c;return n?r.a.createElement(u,o({ref:t},s,{components:n})):r.a.createElement(u,o({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,i=new Array(c);i[0]=h;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,i[1]=o;for(var s=2;s<c;s++)i[s]=n[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);